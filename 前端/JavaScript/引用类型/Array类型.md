## 创建数组
除了Object之外，Array类型恐怕是ECMAScript中最常用的类型了。而且，ECMAScript中的数组与其他多数语言中的数组有着相当大的区别。虽然ECMAScript数组与其他语言中的数组都是数据的有序列表，但与其他语言不同的是，ECMAScript数组的每一项可以保存任何类型的数据。也就是说，可以用数组的第一个位置来保存字符串，用第二位置来保存数值，用第三个位置来保存对象，以此类推。而且，ECMAScript数组的大小是可以动态调整的，即可以随着数据的添加自动增长以容纳新增数据。

创建数组的基本方式有两种。第一种是使用Array构造函数，如下面的代码所示。
```
var colors = new Array();
```
如果预先知道数组要保存的项目数量，也可以给构造函数传递该数量，而该数量会自动变成length属性的值。例如，下面的代码将创建length值为20的数组。
```
var colors = new Array(20);
```
也可以向Array构造函数传递数组中应该包含的项。以下代码创建了一个包含3个字符串值的数组：
```
var colors = new Array('red', 'blue', 'green');
```
当然，给构造函数传递一个值也可以创建数组。但这时候问题就复杂一点了，因为如果传递的是数值，则会按照该数值创建包含给定项数的数组；而如果传递的是其他类型的参数，则会创建包含那个值的只有一项的数组。下面就两个例子：
```
var colors = new Array(3);           // 创建一个包含3项的数组
var names = new Array('Greg');       // 创建一个包含1项，即字符串'Greg'的数组
```
另外，在使用Array构造函数时也可以省略new操作符。如下面的例子所示，省略new操作符的结果相同：
```
var colors = Array(3);               // 创建一个包含3项的数组
var names = Array('Greg');           // 创建一个包含1项，即字符串'Greg'的数组
```
创建数组的第二种基本方式是使用**数组字面量**表示法。数组字面量由一对包含数组项的方括号表示，多个数组项之间以逗号隔开，如下所示：
```
var colors = ['red', 'blue', 'green'];   // 创建一个包含3个字符串的数组
var names = [];                          // 创建一个空数组
var values = [1,2,];                     // 不要这样！这样会创建一个包含2或3项的数组
var options = [,,,,,];                   // 不要这样！这样会创建一个包含5或6项的数组
```
以上代码的第一行创建了一个包含3个字符串的数组。第二行使用一对空方括号创建了一个空数组。第三行展示了在数组字面量的最后一项添加逗号的结果：在IE中，values会成为一个包含3个项且每项的值分别为1、2和undefined的数组；在其他浏览器中，values会成为一个包含2项且值分别为1和2的数组。原因是IE8及之前版本中的ECMAScript实现在数组字面量方面存在bug。由于这个bug导致的另一种情况如最后一行代码所示，该行代码可能会创建包含5项的数组（在IE9+、Firefox、Opera、Safari和Chrome中），也可能会创建包含6项的数组（在IE8及更早版本中）。在像这种省略值的情况下，每一项都将获得undefined值；这个结果与调用Array构造函数时传递项数在逻辑上是相同的。但是由于IE的实现与其他浏览器不一致，因此我们强烈建议不要使用这种语法。

## 操作数组
在读取和设置数组的值时，要使用方括号并提供相应值的基于0的数字索引，如下所示：
```
var colors = ['red', 'blue', 'green'];    // 定义一个字符串数组
alert(colors[0]);                         // 显示第一项
colors[2] = 'black';                      // 修改第三项
colors[3] = 'brown';                      // 新增第四项
```
方括号中的索引表示要访问的值。如果索引小于数组中的项数，则返回对应项的值，就像这个例子中的`colors[0]`会显示'red'一样。设置数组的值也使用相同的语法，但会替换指定位置的值。如果设置某个值的索引超过了数组现有项数，如这个例子中的`colors[3]`所示，数组就会自动增加到该索引值加1的长度（就这个例子而言，索引是3，因此数组长度就是4）。

数组的项数保存在其length属性中，这个属性始终会返回0或更大的值，如下面这个例子所示：
```
var colors = ['red', 'blue', 'green'];       // 创建一个包含3个字符串的数组
var names = [];                              // 创建一个空数组

alert(colors.length);            //3
alert(names.length);             //0
```
数组的length属性很有特点——它不是只读的。因此，通过设置这个属性，可以从数组的末尾移除项或向数组中添加新项。请看下面的例子：
```
var colors = ['red', 'blue', 'green'];     // 创建一个包含3个字符串的数组
colors.length = 2;
alert(colors[2]);                 //undefined
```
这个例子中的数组colors一开始有3个值。将其length属性设置为2会移除最后一项（位置为2的那一项），结果再访问`colors[2]`就会显示undefined了。如果将其length属性设置为大于数组项数的值，则新增的每一项都会取得undefined值，如下所示：
```
var colors = ['red', 'blue', 'green'];    // 创建一个包含3个字符串的数组
colors.length = 4;
alert(colors[3]);                 //undefined
```
在此，虽然colors数组包含3个项，但把它的length属性设置成了4。这个数组不存在位置3，所以访问这个位置的值就得到了特殊值undefined。

利用length属性也可以方便地在数组末尾添加新项，如下所示：
```
var colors = ['red', 'blue', 'green'];        // 创建一个包含3个字符串的数组
colors[colors.length] = 'black';                   //（在位置3）添加一种颜色
colors[colors.length] = 'brown';                   //（在位置4）再添加一种颜色
```
当把一个值放在超出当前数组大小的位置上时，数组就会重新计算其长度值，即长度值等于最后一项的索引加1，如下面的例子所示：
```
var colors = ['red', 'blue', 'green'];         // 创建一个包含3个字符串的数组
colors[99] = 'black';                          // （在位置99）添加一种颜色
alert(colors.length);  // 100
```
在这个例子中，我们向colors数组的位置99插入了一个值，结果数组新长度（length）就是100（99+1）。而位置3到位置98实际上都是不存在的，所以访问它们都将返回undefined。

数组最多可以包含4 294 967 295个项，这几乎已经能够满足任何编程需求了。如果想添加的项数超过这个上限值，就会发生异常。而创建一个初始大小与这个上限值接近的数组，则可能会导致运行时间超长的脚本错误。

## 检测数组
